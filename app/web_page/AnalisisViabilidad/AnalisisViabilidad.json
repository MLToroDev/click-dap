{
  "id" : "AnalisisViabilidad",
  "name" : "AnalisisViabilidad",
  "type" : "form",
  "uuid" : "6d7b0c39-2f20-4ad3-9cd6-e7876cac41b6",
  "modelVersion" : "2.6",
  "lastUpdate" : 1762535991806,
  "description" : "Formulario para el análisis de viabilidad",
  "rows" : [
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "text" : {
            "type" : "interpolation",
            "value" : "Análisis de Viabilidad de la Solicitud"
          },
          "level" : {
            "type" : "constant",
            "value" : "Level 2"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "left"
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : false
          }
        },
        "reference" : "4de8158f-07b7-4f7c-bf2f-7c396200dc8a",
        "hasValidationError" : false,
        "id" : "pbTitle"
      }
    ],
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 2,
          "lg" : 2
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "mb-3"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<strong>Solicitante:</strong> {{formInput.nombreSolicitante}}"
          }
        },
        "reference" : "1c60c4be-4e4f-434c-9f99-92f7b8e49a1d",
        "hasValidationError" : false,
        "id" : "pbText"
      },
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 2,
          "lg" : 2
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "mb-3"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<strong>Radicado:</strong> {{formInput.numeroRadicado || 'No asignado'}}"
          }
        },
        "reference" : "298d6d1b-45bb-4f71-b1c7-a243bce23435",
        "hasValidationError" : false,
        "id" : "pbText"
      },
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 8,
          "lg" : 2
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "mb-3"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<strong>Estado actual:</strong> {{formInput.estado}}"
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "alignment" : {
            "type" : "constant",
            "value" : "left"
          }
        },
        "reference" : "5deed475-3569-48d8-8b7b-4b3d8a5dba9f",
        "hasValidationError" : false,
        "id" : "pbText"
      }
    ],
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "mb-3"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : true
          },
          "text" : {
            "type" : "interpolation",
            "value" : "<strong>Descripción:</strong><br/>{{formInput.descripcion}}"
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : true
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Default label"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "alignment" : {
            "type" : "constant",
            "value" : "left"
          }
        },
        "reference" : "1159252c-7d3f-4f23-9a76-4c62796b08f8",
        "hasValidationError" : false,
        "id" : "pbText"
      }
    ],
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 6
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Resultado del Análisis"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "required" : {
            "type" : "constant",
            "value" : true
          },
          "availableValues" : {
            "type" : "constant",
            "value" : [
              {
                "label" : "Viable",
                "value" : "VIABLE"
              },
              {
                "label" : "Devolver por error en datos",
                "value" : "ERROR_DATOS_CIUDADANO"
              },
              {
                "label" : "Reasignar por error de competencia",
                "value" : "ERROR_ASIGNACION"
              }
            ]
          },
          "displayedKey" : {
            "type" : "constant",
            "value" : "label"
          },
          "returnedKey" : {
            "type" : "constant",
            "value" : "value"
          },
          "selectedValue" : {
            "type" : "contract",
            "value" : "resultadoAnalisis"
          },
          "disabled" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : false
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : false
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          },
          "inline" : {
            "type" : "constant",
            "value" : false
          }
        },
        "reference" : "f032df1b-7446-47f0-8d1c-2af2fba9d4cb",
        "hasValidationError" : false,
        "id" : "pbRadioButtons"
      }
    ],
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 6
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : ""
          },
          "hidden" : {
            "type" : "expression",
            "value" : "contractInput.resultadoAnalisis === 'VIABLE'"
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Justificación / Comentarios del Análisis"
          },
          "labelPosition" : {
            "type" : "constant",
            "value" : "top"
          },
          "required" : {
            "type" : "expression",
            "value" : "contractInput.resultadoAnalisis && contractInput.resultadoAnalisis !== 'VIABLE'"
          },
          "placeholder" : {
            "type" : "interpolation",
            "value" : "Describe la razón de la devolución o reasignación"
          },
          "value" : {
            "type" : "contract",
            "value" : "comentariosTecnicos"
          },
          "readOnly" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : false
          },
          "minLength" : {
            "type" : "constant",
            "value" : ""
          },
          "maxLength" : {
            "type" : "constant",
            "value" : ""
          },
          "labelHidden" : {
            "type" : "constant",
            "value" : false
          },
          "labelWidth" : {
            "type" : "constant",
            "value" : 4
          }
        },
        "reference" : "4c0dc79a-254a-40aa-bf67-deaee5dc7cc8",
        "hasValidationError" : false,
        "id" : "pbTextarea"
      }
    ],
    [
      {
        "type" : "component",
        "dimension" : {
          "xs" : 12,
          "sm" : 12,
          "md" : 12,
          "lg" : 12
        },
        "propertyValues" : {
          "cssClasses" : {
            "type" : "constant",
            "value" : "text-end"
          },
          "hidden" : {
            "type" : "constant",
            "value" : false
          },
          "label" : {
            "type" : "interpolation",
            "value" : "Registrar Análisis"
          },
          "buttonStyle" : {
            "type" : "constant",
            "value" : "primary"
          },
          "alignment" : {
            "type" : "constant",
            "value" : "right"
          },
          "action" : {
            "type" : "constant",
            "value" : "Submit task"
          },
          "disabled" : {
            "type" : "constant",
            "value" : false
          },
          "allowHTML" : {
            "type" : "constant",
            "value" : false
          },
          "assign" : {
            "type" : "constant",
            "value" : false
          },
          "url" : {
            "type" : "interpolation"
          },
          "responseStatusCode" : {
            "type" : "variable"
          },
          "dataToSend" : {
            "type" : "constant"
          },
          "dataFromSuccess" : {
            "type" : "variable"
          },
          "closeOnSuccess" : {
            "type" : "constant",
            "value" : false
          },
          "dataFromError" : {
            "type" : "variable"
          },
          "targetUrlOnSuccess" : {
            "type" : "interpolation"
          },
          "collectionToModify" : {
            "type" : "variable"
          },
          "modalId" : {
            "type" : "constant",
            "value" : ""
          },
          "collectionPosition" : {
            "type" : "constant",
            "value" : "Last"
          },
          "valueToAdd" : {
            "type" : "constant"
          },
          "removeItem" : {
            "type" : "variable"
          }
        },
        "reference" : "a14cf579-ff3b-45ca-a0b9-86fca3b74d55",
        "hasValidationError" : false,
        "id" : "pbButton"
      }
    ]
  ],
  "variables" : {
    "previewTaskId" : {
      "type" : "expression",
      "value" : [
        "return '';"
      ],
      "exposed" : false
    },
    "taskId" : {
      "type" : "expression",
      "value" : [
        "const params = (typeof $parameters !== 'undefined' && $parameters) ? $parameters : {};",
        "let value = params.id || params.taskId || '';",
        "if (Array.isArray(value)) {",
        "  value = value[0];",
        "}",
        "if (!value && typeof $page !== 'undefined' && $page) {",
        "  value = $page.taskId || '';",
        "}",
        "if (!value && typeof window !== 'undefined' && window.location) {",
        "  try {",
        "    const url = new URL(window.location.href);",
        "    value = url.searchParams.get('id') || url.searchParams.get('taskId') || '';",
        "  } catch (error) {",
        "    console.warn('[AnalisisViabilidad] No se pudo leer taskId desde window.location', error);",
        "  }",
        "}",
        "if (!value && typeof $data.previewTaskId !== 'undefined' && $data.previewTaskId !== null) {",
        "  value = $data.previewTaskId;",
        "}",
        "if (Array.isArray(value)) {",
        "  value = value[0];",
        "}",
        "return value ? value.toString().trim() : '';"
      ],
      "exposed" : false
    },
    "contextUrl" : {
      "type" : "expression",
      "value" : [
        "const id = $data.taskId || '';",
        "return id ? '../API/bpm/userTask/' + encodeURIComponent(id) + '/context' : '';"
      ],
      "exposed" : false
    },
    "context" : {
      "type" : "url",
      "value" : [
        "{{contextUrl}}"
      ],
      "exposed" : false
    },
    "solicitudPersistenceId" : {
      "type" : "expression",
      "value" : [
        "const ctx = $data.context || {};",
        "if (ctx.solicitudInstancia && ctx.solicitudInstancia.persistenceId) {",
        "  return ctx.solicitudInstancia.persistenceId;",
        "}",
        "if (ctx.solicitudInstancia_ref) {",
        "  const ref = ctx.solicitudInstancia_ref;",
        "  if (ref.persistenceId) {",
        "    return ref.persistenceId;",
        "  }",
        "  if (ref.link) {",
        "    const match = ref.link.match(/\\/(\\d+)(?:$|\\?)/);",
        "    if (match && match[1]) {",
        "      return match[1];",
        "    }",
        "    return ref.link.replace(/.*\\//, '');",
        "  }",
        "}",
        "return '';"
      ],
      "exposed" : false
    },
    "solicitudUrl" : {
      "type" : "expression",
      "value" : [
        "const id = $data.solicitudPersistenceId || '';",
        "return id ? '../API/bdm/businessData/com.company.model.Solicitud/' + encodeURIComponent(id) : '';"
      ],
      "exposed" : false
    },
    "solicitudInstancia" : {
      "type" : "url",
      "value" : [
        "{{solicitudUrl}}"
      ],
      "exposed" : false
    },
    "formInput" : {
      "type" : "expression",
      "value" : [
        "const contextData = $data.context || {};",
        "const solicitud = $data.solicitudInstancia || contextData.solicitudInstancia || {};",
        "function formatEstado(valor){",
	"if(!valor){",
	"\treturn '';",
	"}",
	"const lower = valor.toString().toLowerCase();",
	"return lower.charAt(0).toUpperCase() + lower.slice(1);",
        "}",
        "return {",
        "\tnombreSolicitante: solicitud.nombreSolicitante || '',",
        "\tnumeroRadicado: solicitud.numeroRadicado || '',",
        "\tdescripcion: solicitud.descripcion || '',",
        "\testado: formatEstado(solicitud.estado || ''),",
        "\tresultadoAnalisis: solicitud.resultadoAnalisis || '',",
        "\tresponsable: solicitud.responsable || ''",
        "};"
      ],
      "exposed" : false
    }
  },
  "assets" : [
    {
      "id" : "ce743414-538d-4c6d-84b3-4a7b625752dc",
      "name" : "style.css",
      "type" : "css",
      "order" : 0,
      "external" : false
    },
    {
      "id" : "d55995fb-2fae-4be9-9d9d-59be4773a140",
      "name" : "localization.json",
      "type" : "json",
      "order" : 0,
      "external" : false
    }
  ],
  "inactiveAssets" : [ ],
  "webResources" : [ ],
  "hasValidationError" : false
}